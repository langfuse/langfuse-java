/**
 * This file was auto-generated by Fern from our API Definition.
 */

package com.langfuse.client.resources.ingestion;

import com.langfuse.client.core.ClientOptions;
import com.langfuse.client.core.RequestOptions;
import com.langfuse.client.resources.ingestion.requests.IngestionRequest;
import com.langfuse.client.resources.ingestion.types.IngestionResponse;

public class IngestionClient {
  protected final ClientOptions clientOptions;

  private final RawIngestionClient rawClient;

  public IngestionClient(ClientOptions clientOptions) {
    this.clientOptions = clientOptions;
    this.rawClient = new RawIngestionClient(clientOptions);
  }

  /**
   * Get responses with HTTP metadata like headers
   */
  public RawIngestionClient withRawResponse() {
    return this.rawClient;
  }

  /**
   * <strong>Legacy endpoint for batch ingestion for Langfuse Observability.</strong>
   * <p>-&gt; Please use the OpenTelemetry endpoint (<code>/api/public/otel/v1/traces</code>). Learn more: https://langfuse.com/integrations/native/opentelemetry</p>
   * <p>Within each batch, there can be multiple events.
   * Each event has a type, an id, a timestamp, metadata and a body.
   * Internally, we refer to this as the &quot;event envelope&quot; as it tells us something about the event but not the trace.
   * We use the event id within this envelope to deduplicate messages to avoid processing the same event twice, i.e. the event id should be unique per request.
   * The event.body.id is the ID of the actual trace and will be used for updates and will be visible within the Langfuse App.
   * I.e. if you want to update a trace, you'd use the same body id, but separate event IDs.</p>
   * <p>Notes:</p>
   * <ul>
   * <li>Introduction to data model: https://langfuse.com/docs/observability/data-model</li>
   * <li>Batch sizes are limited to 3.5 MB in total. You need to adjust the number of events per batch accordingly.</li>
   * <li>The API does not return a 4xx status code for input errors. Instead, it responds with a 207 status code, which includes a list of the encountered errors.</li>
   * </ul>
   */
  public IngestionResponse batch(IngestionRequest request) {
    return this.rawClient.batch(request).body();
  }

  /**
   * <strong>Legacy endpoint for batch ingestion for Langfuse Observability.</strong>
   * <p>-&gt; Please use the OpenTelemetry endpoint (<code>/api/public/otel/v1/traces</code>). Learn more: https://langfuse.com/integrations/native/opentelemetry</p>
   * <p>Within each batch, there can be multiple events.
   * Each event has a type, an id, a timestamp, metadata and a body.
   * Internally, we refer to this as the &quot;event envelope&quot; as it tells us something about the event but not the trace.
   * We use the event id within this envelope to deduplicate messages to avoid processing the same event twice, i.e. the event id should be unique per request.
   * The event.body.id is the ID of the actual trace and will be used for updates and will be visible within the Langfuse App.
   * I.e. if you want to update a trace, you'd use the same body id, but separate event IDs.</p>
   * <p>Notes:</p>
   * <ul>
   * <li>Introduction to data model: https://langfuse.com/docs/observability/data-model</li>
   * <li>Batch sizes are limited to 3.5 MB in total. You need to adjust the number of events per batch accordingly.</li>
   * <li>The API does not return a 4xx status code for input errors. Instead, it responds with a 207 status code, which includes a list of the encountered errors.</li>
   * </ul>
   */
  public IngestionResponse batch(IngestionRequest request, RequestOptions requestOptions) {
    return this.rawClient.batch(request, requestOptions).body();
  }
}
